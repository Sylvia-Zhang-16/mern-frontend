(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],Array(21).concat([function(e,t,n){},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,a=n(1),i=n.n(a),r=n(12),s=n.n(r),l=(n(31),n(4)),o=n(9),u=n(3),j=n(8),d=n(2),b=(n(32),n(33),n(34),n(0)),O=function(e){return Object(b.jsx)("div",{className:"avatar ".concat(e.className),style:e.style,children:Object(b.jsx)("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}})})},p=(n(36),function(e){return Object(b.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),h=function(e){return Object(b.jsx)("li",{className:"user-item",children:Object(b.jsx)(p,{className:"user-item__content users-page",children:Object(b.jsxs)(o.b,{to:"/".concat(e.id,"/activities"),children:[Object(b.jsx)("div",{className:"user-item__image",children:Object(b.jsx)(O,{image:"http://localhost:5000"+"/".concat(e.image),alt:e.name})}),Object(b.jsxs)("div",{className:"user-item__info",children:[Object(b.jsx)("h2",{children:e.name}),Object(b.jsxs)("h3",{children:[e.count," ",1===e.count?"Activity":"Activities"]})]})]})})})},x=function(e){return 0===e.items.length?Object(b.jsx)("div",{className:"center",children:Object(b.jsx)(p,{children:Object(b.jsx)("h2",{children:"No users found."})})}):Object(b.jsx)("ul",{className:"users-list",children:e.items.map((function(e){return Object(b.jsx)(h,{id:e.id,image:e.image,name:e.name,count:e.activities.length},e.id)}))})},v=n(6),m=n(60),f=(n(45),function(e){return s.a.createPortal(Object(b.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),g=(n(46),function(e){var t=Object(b.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(b.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(b.jsx)("h2",{children:e.header})}),Object(b.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(b.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(b.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))}),y=function(e){return Object(b.jsxs)(i.a.Fragment,{children:[e.show&&Object(b.jsx)(f,{onClick:e.onCancel}),Object(b.jsx)(m.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(b.jsx)(g,Object(v.a)({},e))})]})},I=(n(47),function(e){return e.href?Object(b.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(b.jsx)(o.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(b.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),C=function(e){return Object(b.jsx)(y,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(b.jsx)(I,{onClick:e.onClear,children:"Okay"}),children:Object(b.jsx)("p",{children:e.error})})},N=(n(48),function(e){return Object(b.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(b.jsx)("div",{className:"lds-dual-ring"})})}),w=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),r=Object(d.a)(i,2),s=r[0],l=r[1],o=Object(a.useRef)([]),b=Object(a.useCallback)(function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,i,r,s,j,d=arguments;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",a=d.length>2&&void 0!==d[2]?d[2]:null,i=d.length>3&&void 0!==d[3]?d[3]:{},c(!0),r=new AbortController,o.current.push(r),e.prev=6,e.next=9,fetch(t,{method:n,body:a,headers:i,signal:r.signal});case 9:return s=e.sent,e.next=12,s.json();case 12:if(j=e.sent,o.current=o.current.filter((function(e){return e!==r})),s.ok){e.next=16;break}throw new Error(j.message);case 16:return c(!1),e.abrupt("return",j);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),c(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:s,sendRequest:b,clearError:function(){l(null)}}},k=function(){var e=w(),t=e.isLoading,n=e.error,c=e.sendRequest,i=e.clearError,r=Object(a.useState)(),s=Object(d.a)(r,2),l=s[0],o=s[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("http://localhost:5000/api/users");case 3:t=e.sent,o(t.users),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{error:n,onClear:i}),t&&Object(b.jsx)("div",{className:"center",children:Object(b.jsx)(N,{})}),!t&&l&&Object(b.jsx)(x,{items:l})]})},T=n(24),E=(n(21),n(23)),S="REQUIRE",V="MINLENGTH",_="MAXLENGTH",A="EMAIL",D=function(){return{type:S}},P=function(e){return{type:V,val:e}},L=function(e,t){var n,c=!0,a=Object(E.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.type===S&&(c=c&&e.trim().length>0),i.type===V&&(c=c&&e.trim().length>=i.val),i.type===_&&(c=c&&e.trim().length<=i.val),"MIN"===i.type&&(c=c&&+e>=i.val),"MAX"===i.type&&(c=c&&+e<=i.val),i.type===A&&(c=c&&/^\S+@\S+\.\S+$/.test(e))}}catch(r){a.e(r)}finally{a.f()}return c},R=(n(49),function(e,t){switch(t.type){case"CHANGE":return Object(v.a)(Object(v.a)({},e),{},{value:t.val,isValid:L(t.val,t.validators)});case"TOUCH":return Object(v.a)(Object(v.a)({},e),{},{isTouched:!0});default:return e}}),F=function(e){var t=Object(a.useReducer)(R,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouched:!1}),n=Object(d.a)(t,2),c=n[0],i=n[1],r=e.id,s=e.onInput,l=c.value,o=c.isValid;Object(a.useEffect)((function(){s(r,l,o)}),[r,l,o,s]);var u=function(t){i({type:"CHANGE",val:t.target.value,validators:e.validators})},j=function(){i({type:"TOUCH"})},O="input"===e.element?Object(b.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:j,value:c.value}):Object(b.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:j,value:c.value});return Object(b.jsxs)("div",{className:"form-control ".concat(!c.isValid&&c.isTouched&&"form-control--invalid"),children:[Object(b.jsx)("label",{htmlFor:e.id,children:e.label}),O,!c.isValid&&c.isTouched&&Object(b.jsx)("p",{children:e.errorText})]})},G=(n(50),function(e){var t=Object(a.useState)(),n=Object(d.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(),s=Object(d.a)(r,2),l=s[0],o=s[1],u=Object(a.useState)(!1),j=Object(d.a)(u,2),O=j[0],p=j[1],h=Object(a.useRef)();Object(a.useEffect)((function(){if(c){var e=new FileReader;e.onload=function(){o(e.result)},e.readAsDataURL(c)}}),[c]);return Object(b.jsxs)("div",{className:"form-control",children:[Object(b.jsx)("input",{id:e.id,ref:h,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var n,c=O;t.target.files&&1===t.target.files.length?(n=t.target.files[0],i(n),p(!0),c=!0):(p(!1),c=!1),e.onInput(e.id,n,c)}}),Object(b.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[Object(b.jsxs)("div",{className:"image-upload__preview",children:[l&&Object(b.jsx)("img",{src:l,alt:"Preview"}),!l&&Object(b.jsx)("p",{children:"Please pick an image."})]}),Object(b.jsx)(I,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!O&&Object(b.jsx)("p",{children:e.errorText})]})}),H=n(17),M=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var c in e.inputs)e.inputs[c]&&(n=c===t.inputId?n&&t.isValid:n&&e.inputs[c].isValid);return Object(v.a)(Object(v.a)({},e),{},{inputs:Object(v.a)(Object(v.a)({},e.inputs),{},Object(H.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},U=function(e,t){var n=Object(a.useReducer)(M,{inputs:e,isValid:t}),c=Object(d.a)(n,2),i=c[0],r=c[1];return[i,Object(a.useCallback)((function(e,t,n){r({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),Object(a.useCallback)((function(e,t){r({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},B=Object(a.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),z=function(){var e=w(),t=e.isLoading,n=e.error,c=e.sendRequest,i=e.clearError,r=Object(a.useContext)(B),s=U({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),l=Object(d.a)(s,2),o=l[0],O=l[1],p=Object(T.useHistory)(),h=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,(n=new FormData).append("title",o.inputs.title.value),n.append("description",o.inputs.description.value),n.append("address",o.inputs.address.value),n.append("image",o.inputs.image.value),e.next=9,c("http://localhost:5000/api/activities","POST",n,{Authorization:"Bearer "+r.token});case 9:p.push("/"),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{error:n,onClear:i}),Object(b.jsxs)("form",{className:"place-form",onSubmit:h,children:[t&&Object(b.jsx)(N,{asOverlay:!0}),Object(b.jsx)(F,{id:"title",element:"input",type:"text",label:"Title",validators:[D()],errorText:"Please enter a valid title.",onInput:O}),Object(b.jsx)(F,{id:"description",element:"textarea",label:"Description",validators:[P(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:O}),Object(b.jsx)(F,{id:"address",element:"input",label:"Address",validators:[D()],errorText:"Please enter a valid address.",onInput:O}),Object(b.jsx)(G,{center:!0,id:"image",onInput:O,errorText:"Please provide an image."}),Object(b.jsx)(I,{type:"submit",onClick:function(){console.log(r.userId)},disabled:!o.isValid,children:"ADD ACTIVITY"})]})]})},q=(n(51),function(e){return Object(b.jsx)("header",{className:"main-header",children:e.children})}),J=(n(52),function(e){var t=Object(a.useContext)(B);return Object(b.jsxs)("ul",{className:"nav-links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/",exact:!0,children:"ALL USERS"})}),t.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/".concat(t.userId,"/activities"),children:"MY ACTIVITIES"})}),t.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/activities/new",children:"NEW ACTIVITY"})}),!t.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)(o.c,{to:"/auth",children:"AUTHENTICATE"})}),t.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)("button",{onClick:t.logout,children:"LOGOUT"})})]})}),Y=(n(53),function(e){var t=Object(b.jsx)(m.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(b.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return s.a.createPortal(t,document.getElementById("drawer-hook"))}),W=(n(54),function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],i=n[1],r=function(){i(!1)};return Object(b.jsxs)(b.Fragment,{children:[c&&Object(b.jsx)(f,{onClick:r}),Object(b.jsx)(Y,{show:c,onClick:r,children:Object(b.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(b.jsx)(J,{})})}),Object(b.jsxs)(q,{children:[Object(b.jsxs)("button",{className:"main-navigation__main-btn",onClick:function(){i(!0)},children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{})]}),Object(b.jsx)("h1",{className:"main-navigation__title",children:Object(b.jsx)(o.b,{to:"/",children:"Your Activities"})}),Object(b.jsx)("nav",{className:"main-navigation__header-nav",children:Object(b.jsx)(J,{})})]})]})}),X=(n(55),n(56),function(e){var t=Object(a.useRef)(),n=e.center,c=e.zoom;return Object(a.useEffect)((function(){var e=new window.google.maps.Map(t.current,{center:n,zoom:c});new window.google.maps.Marker({position:n,map:e})}),[n,c]),Object(b.jsx)("div",{ref:t,className:"map ".concat(e.className),style:e.style})}),K=function(e){var t=Object(a.useContext)(B),n=w(),c=n.isLoading,r=n.error,s=n.sendRequest,l=n.clearError,o=Object(a.useState)(!1),O=Object(d.a)(o,2),h=O[0],x=O[1],v=Object(a.useState)(!1),m=Object(d.a)(v,2),f=m[0],g=m[1],k=function(){return x(!1)},T=function(){g(!1)},E=function(){var n=Object(j.a)(Object(u.a)().mark((function n(){return Object(u.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g(!1),n.prev=1,n.next=4,s("http://localhost:5000/api"+"/activities/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token});case 4:e.onDelete(e.id),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{error:r,onClear:l}),Object(b.jsx)(y,{show:h,onCancel:k,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:Object(b.jsx)(I,{onClick:k,children:"CLOSE"}),children:Object(b.jsx)("div",{className:"map-container",children:Object(b.jsx)(X,{center:e.coordinates,zoom:16})})}),Object(b.jsx)(y,{show:f,onCancel:T,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(I,{inverse:!0,onClick:T,children:"CANCEL"}),Object(b.jsx)(I,{danger:!0,onClick:E,children:"DELETE"})]}),children:Object(b.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),Object(b.jsx)("li",{className:"place-item",children:Object(b.jsxs)(p,{className:"place-item__content",children:[c&&Object(b.jsx)(N,{asOverlay:!0}),Object(b.jsx)("div",{className:"place-item__image",children:Object(b.jsx)("img",{src:"http://localhost:5000"+"/".concat(e.image),alt:e.title})}),Object(b.jsxs)("div",{className:"place-item__info",children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsx)("h3",{children:e.address}),Object(b.jsx)("p",{children:e.description})]}),Object(b.jsxs)("div",{className:"place-item__actions",children:[Object(b.jsx)(I,{inverse:!0,onClick:function(){return x(!0)},children:"VIEW ON MAP"}),t.userId===e.creatorId&&Object(b.jsx)(I,{to:"/activities/".concat(e.id),children:"EDIT"}),t.userId===e.creatorId&&Object(b.jsx)(I,{danger:!0,onClick:function(){g(!0)},children:"DELETE"})]})]})})]})},Q=(n(57),function(e){return 0===e.items.length?Object(b.jsx)("div",{className:"place-list center",children:Object(b.jsxs)(p,{children:[Object(b.jsx)("h2",{children:"No activities found. Maybe create one?"}),Object(b.jsx)(I,{to:"/activities/new",children:"Add activity"})]})}):Object(b.jsx)("ul",{className:"place-list",children:e.items.map((function(t){return Object(b.jsx)(K,{id:t.id,image:t.image,title:t.title,description:t.description,address:t.address,creatorId:t.creator,coordinates:t.location,onDelete:e.onDeleteActivity},t.id)}))})}),$=function(){var e=w(),t=e.isLoading,n=e.error,c=e.sendRequest,i=e.clearError,r=Object(a.useState)(),s=Object(d.a)(r,2),o=s[0],O=s[1],p=Object(l.useParams)().userId;Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("http://localhost:5000/api"+"/activities/user/".concat(p));case 3:t=e.sent,O(t.activities),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[c,p]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{error:n,onClear:i}),t&&Object(b.jsx)("div",{className:"center",children:Object(b.jsx)(N,{})}),!t&&o&&Object(b.jsx)(Q,{items:o,onDeletedActivity:function(e){O((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},Z=function(){var e=Object(a.useContext)(B),t=Object(l.useHistory)(),n=w(),c=n.isLoading,i=n.error,r=n.sendRequest,s=n.clearError,o=Object(a.useState)(),O=Object(d.a)(o,2),h=O[0],x=O[1],v=Object(l.useParams)().activityId,m=U({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),f=Object(d.a)(m,3),g=f[0],y=f[1],k=f[2];Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("http://localhost:5000/api"+"/activities/".concat(v));case 3:t=e.sent,x(t.activity),k({title:{value:t.activity.title,isValid:!0},description:{value:t.activity.description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[r,v,k]);var T=function(){var n=Object(j.a)(Object(u.a)().mark((function n(c){return Object(u.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),n.prev=1,n.next=4,r("http://localhost:5000/api"+"/activities/".concat(v),"PATCH",JSON.stringify({title:g.inputs.title.value,description:g.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 4:t.push("/"+e.userId+"/activities"),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}();return h?c?Object(b.jsx)("div",{className:"center",children:Object(b.jsx)(N,{})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{error:i,onClear:s}),!c&&h&&Object(b.jsxs)("form",{className:"place-form",onSubmit:T,children:[Object(b.jsx)(F,{id:"title",element:"input",type:"text",label:"Title",validators:[D()],errorText:"Please enter a valid title.",onInput:y,initialValue:h.title,initialValid:!0}),Object(b.jsx)(F,{id:"description",element:"textarea",label:"Description",validators:[P(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:y,initialValue:h.description,initialValid:!0}),Object(b.jsx)(I,{type:"submit",disabled:!g.isValid,children:"UPDATE ACTIVITY"})]}),";"]}):Object(b.jsx)("div",{className:"center",children:Object(b.jsx)(p,{children:Object(b.jsx)("h2",{children:"Could not find activity!"})})})},ee=(n(58),function(){var e=Object(a.useContext)(B),t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],i=n[1],r=w(),s=r.isLoading,l=r.error,o=r.sendRequest,O=r.clearError,h=U({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),x=Object(d.a)(h,3),m=x[0],f=x[1],g=x[2],y=function(){var t=Object(j.a)(Object(u.a)().mark((function t(n){var a,i,r;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!c){t.next=13;break}return t.prev=2,t.next=5,o("http://localhost:5000/api/users/login","POST",JSON.stringify({email:m.inputs.email.value,password:m.inputs.password.value}),{"Content-Type":"application/json"});case 5:a=t.sent,e.login(a.userId,a.token),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:t.next=27;break;case 13:return t.prev=13,(i=new FormData).append("email",m.inputs.email.value),i.append("name",m.inputs.name.value),i.append("password",m.inputs.password.value),i.append("image",m.inputs.image.value),t.next=21,o("http://localhost:5000/api/users/signup","POST",i);case 21:r=t.sent,e.login(r.userId,r.token),t.next=27;break;case 25:t.prev=25,t.t1=t.catch(13);case 27:case"end":return t.stop()}}),t,null,[[2,9],[13,25]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{error:l,onClear:O}),Object(b.jsxs)(p,{className:"authentication",children:[s&&Object(b.jsx)(N,{asOverlay:!0}),Object(b.jsx)("h2",{children:"Login Required"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:y,children:[!c&&Object(b.jsx)(F,{element:"input",id:"name",type:"text",label:"Your Name",validators:[D()],errorText:"Please enter a name.",onInput:f}),Object(b.jsx)(F,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:A}],errorText:"Please enter a valid email address.",onInput:f}),Object(b.jsx)(F,{element:"input",id:"password",type:"password",label:"Password",validators:[P(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:f}),!c&&Object(b.jsx)(G,{center:!0,id:"image",onInput:f,errorText:"Please provide an image."}),Object(b.jsx)(I,{type:"submit",disabled:!m.isValid,children:c?"LOGIN":"SIGNUP"})]}),Object(b.jsxs)(I,{inverse:!0,onClick:function(){c?g(Object(v.a)(Object(v.a)({},m.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):g(Object(v.a)(Object(v.a)({},m.inputs),{},{name:void 0,image:void 0}),m.inputs.email.isValid&&m.inputs.password.isValid),i((function(e){return!e}))},children:["SWITCH TO ",c?"SIGNUP":"LOGIN"]})]})]})}),te=function(){var e,t=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)({}),s=Object(d.a)(r,2),l=s[0],o=s[1],u=Object(a.useState)(),j=Object(d.a)(u,2),b=j[0],O=j[1],p=(Object(a.useContext)(B),Object(a.useCallback)((function(e,t,n){i(t),o(e);var c=n||new Date((new Date).getTime()+36e5);O(c),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:c.toISOString()}))}),[])),h=Object(a.useCallback)((function(){i(null),o(null),localStorage.removeItem("userData"),O(null)}),[]);return Object(a.useEffect)((function(){if(n&&b){var e=b.getTime()-(new Date).getTime();c=setTimeout(h,e)}else clearTimeout(c)}),[n,h,b]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&p(e.userId,e.token,new Date(e.expiration))}),[p]),{token:n,login:p,logout:h,userId:l}}(),n=t.token,i=t.login,r=t.logout,s=t.userId;return e=n?Object(b.jsxs)(l.Switch,{children:[Object(b.jsx)(l.Route,{path:"/",exact:!0,children:Object(b.jsx)(k,{})}),Object(b.jsx)(l.Route,{path:"/:userId/activities",exact:!0,children:Object(b.jsx)($,{})}),Object(b.jsx)(l.Route,{path:"/activities/new",exact:!0,children:Object(b.jsx)(z,{})}),Object(b.jsx)(l.Route,{path:"/activities/:activityId",children:Object(b.jsx)(Z,{})}),Object(b.jsx)(l.Redirect,{to:"/"})]}):Object(b.jsxs)(l.Switch,{children:[Object(b.jsx)(l.Route,{path:"/",exact:!0,children:Object(b.jsx)(k,{})}),Object(b.jsx)(l.Route,{path:"/:userId/activities",exact:!0,children:Object(b.jsx)($,{})}),Object(b.jsx)(l.Route,{path:"/auth",children:Object(b.jsx)(ee,{})}),Object(b.jsx)(l.Redirect,{to:"/auth"})]}),Object(b.jsx)(B.Provider,{value:{isLoggedIn:!!n,token:n,userId:s,login:i,logout:r},children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(W,{}),Object(b.jsx)("main",{children:e})]})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(te,{})}),document.getElementById("root")),ne()}]),[[59,1,2]]]);
//# sourceMappingURL=main.40d3c405.chunk.js.map