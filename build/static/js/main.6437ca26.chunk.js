(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,i){},,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},,function(e,t,i){},,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var c=i(1),a=i.n(c),s=i(8),n=i.n(s),r=(i(23),i(2)),l=i(5),o=(i(24),i(25),i(26),i(0));var d=e=>Object(o.jsx)("div",{className:"avatar ".concat(e.className),style:e.style,children:Object(o.jsx)("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}})});i(28);var j=e=>Object(o.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children});var u=e=>Object(o.jsx)("li",{className:"user-item",children:Object(o.jsx)(j,{className:"user-item__content users-page",children:Object(o.jsxs)(l.b,{to:"/".concat(e.id,"/activities"),children:[Object(o.jsx)("div",{className:"user-item__image",children:Object(o.jsx)(d,{image:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ASSET_URL+"/".concat(e.image),alt:e.name})}),Object(o.jsxs)("div",{className:"user-item__info",children:[Object(o.jsx)("h2",{children:e.name}),Object(o.jsxs)("h3",{children:[e.count," ",1===e.count?"Activity":"Activities"]})]})]})})});var O=e=>0===e.items.length?Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(j,{children:Object(o.jsx)("h2",{children:"No users found."})})}):Object(o.jsx)("ul",{className:"users-list",children:e.items.map((e=>Object(o.jsx)(u,{id:e.id,image:e.image,name:e.name,count:e.activities.length},e.id)))}),b=i(52);i(37);var h=e=>n.a.createPortal(Object(o.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"));i(38);const m=e=>{const t=Object(o.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(o.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(o.jsx)("h2",{children:e.header})}),Object(o.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:e=>e.preventDefault(),children:[Object(o.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(o.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return n.a.createPortal(t,document.getElementById("modal-hook"))};var v=e=>Object(o.jsxs)(a.a.Fragment,{children:[e.show&&Object(o.jsx)(h,{onClick:e.onCancel}),Object(o.jsx)(b.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(o.jsx)(m,{...e})})]});i(39);var x=e=>e.href?Object(o.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(o.jsx)(l.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(o.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children});var p=e=>Object(o.jsx)(v,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(o.jsx)(x,{onClick:e.onClear,children:"Okay"}),children:Object(o.jsx)("p",{children:e.error})});i(40);var _=e=>Object(o.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(o.jsx)("div",{className:"lds-dual-ring"})});const E=()=>{const[e,t]=Object(c.useState)(!1),[i,a]=Object(c.useState)(),s=Object(c.useRef)([]),n=Object(c.useCallback)((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(!0);const r=new AbortController;s.current.push(r);try{const a=await fetch(e,{method:i,body:c,headers:n,signal:r.signal}),l=await a.json();if(s.current=s.current.filter((e=>e!==r)),!a.ok)throw new Error(l.message);return t(!1),l}catch(l){throw a(l.message),t(!1),l}}),[]);return Object(c.useEffect)((()=>()=>{s.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:i,sendRequest:n,clearError:()=>{a(null)}}};var S=()=>{const{isLoading:e,error:t,sendRequest:i,clearError:a}=E(),[s,n]=Object(c.useState)();return Object(c.useEffect)((()=>{(async()=>{try{const e=await i(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/users");n(e.users)}catch(e){}})()}),[i]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{error:t,onClear:a}),e&&Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(_,{})}),!e&&s&&Object(o.jsx)(O,{items:s})]})},T=i(16);i(14);const g="REQUIRE",C="MINLENGTH",f="MAXLENGTH",N="EMAIL",y=()=>({type:g}),A=e=>({type:C,val:e}),I=(e,t)=>{let i=!0;for(const c of t)c.type===g&&(i=i&&e.trim().length>0),c.type===C&&(i=i&&e.trim().length>=c.val),c.type===f&&(i=i&&e.trim().length<=c.val),"MIN"===c.type&&(i=i&&+e>=c.val),"MAX"===c.type&&(i=i&&+e<=c.val),c.type===N&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i};i(41);const R=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:I(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}};var P=e=>{const[t,i]=Object(c.useReducer)(R,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouched:!1}),{id:a,onInput:s}=e,{value:n,isValid:r}=t;Object(c.useEffect)((()=>{s(a,n,r)}),[a,n,r,s]);const l=t=>{i({type:"CHANGE",val:t.target.value,validators:e.validators})},d=()=>{i({type:"TOUCH"})},j="input"===e.element?Object(o.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:l,onBlur:d,value:t.value}):Object(o.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:l,onBlur:d,value:t.value});return Object(o.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[Object(o.jsx)("label",{htmlFor:e.id,children:e.label}),j,!t.isValid&&t.isTouched&&Object(o.jsx)("p",{children:e.errorText})]})};i(42);var D=e=>{const[t,i]=Object(c.useState)(),[a,s]=Object(c.useState)(),[n,r]=Object(c.useState)(!1),l=Object(c.useRef)();Object(c.useEffect)((()=>{if(!t)return;const e=new FileReader;e.onload=()=>{s(e.result)},e.readAsDataURL(t)}),[t]);return Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("input",{id:e.id,ref:l,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:t=>{let c,a=n;t.target.files&&1===t.target.files.length?(c=t.target.files[0],i(c),r(!0),a=!0):(r(!1),a=!1),e.onInput(e.id,c,a)}}),Object(o.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[Object(o.jsxs)("div",{className:"image-upload__preview",children:[a&&Object(o.jsx)("img",{src:a,alt:"Preview"}),!a&&Object(o.jsx)("p",{children:"Please pick an image."})]}),Object(o.jsx)(x,{type:"button",onClick:()=>{l.current.click()},children:"PICK IMAGE"})]}),!n&&Object(o.jsx)("p",{children:e.errorText})]})};const w=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const c in e.inputs)e.inputs[c]&&(i=c===t.inputId?i&&t.isValid:i&&e.inputs[c].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},L=(e,t)=>{const[i,a]=Object(c.useReducer)(w,{inputs:e,isValid:t});return[i,Object(c.useCallback)(((e,t,i)=>{a({type:"INPUT_CHANGE",value:t,isValid:i,inputId:e})}),[]),Object(c.useCallback)(((e,t)=>{a({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},V=Object(c.createContext)({isLoggedIn:!1,userId:null,token:null,login:()=>{},logout:()=>{}});var k=()=>{const{isLoading:e,error:t,sendRequest:i,clearError:a}=E(),s=Object(c.useContext)(V),[n,r]=L({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),l=Object(T.useHistory)();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{error:t,onClear:a}),Object(o.jsxs)("form",{className:"place-form",onSubmit:async e=>{e.preventDefault();try{const e=new FormData;e.append("title",n.inputs.title.value),e.append("description",n.inputs.description.value),e.append("address",n.inputs.address.value),e.append("image",n.inputs.image.value),await i(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/activities","POST",e,{Authorization:"Bearer "+s.token}),l.push("/")}catch(t){}},children:[e&&Object(o.jsx)(_,{asOverlay:!0}),Object(o.jsx)(P,{id:"title",element:"input",type:"text",label:"Title",validators:[y()],errorText:"Please enter a valid title.",onInput:r}),Object(o.jsx)(P,{id:"description",element:"textarea",label:"Description",validators:[A(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:r}),Object(o.jsx)(P,{id:"address",element:"input",label:"Address",validators:[y()],errorText:"Please enter a valid address.",onInput:r}),Object(o.jsx)(D,{center:!0,id:"image",onInput:r,errorText:"Please provide an image."}),Object(o.jsx)(x,{type:"submit",onClick:()=>{console.log(s.userId)},disabled:!n.isValid,children:"ADD ACTIVITY"})]})]})};i(43);var H=e=>Object(o.jsx)("header",{className:"main-header",children:e.children});i(44);var U=e=>{const t=Object(c.useContext)(V);return Object(o.jsxs)("ul",{className:"nav-links",children:[Object(o.jsx)("li",{children:Object(o.jsx)(l.c,{to:"/",exact:!0,children:"ALL USERS"})}),t.isLoggedIn&&Object(o.jsx)("li",{children:Object(o.jsx)(l.c,{to:"/".concat(t.userId,"/activities"),children:"MY ACTIVITIES"})}),t.isLoggedIn&&Object(o.jsx)("li",{children:Object(o.jsx)(l.c,{to:"/activities/new",children:"NEW ACTIVITY"})}),!t.isLoggedIn&&Object(o.jsx)("li",{children:Object(o.jsx)(l.c,{to:"/auth",children:"AUTHENTICATE"})}),t.isLoggedIn&&Object(o.jsx)("li",{children:Object(o.jsx)("button",{onClick:t.logout,children:"LOGOUT"})})]})};i(45);var K=e=>{const t=Object(o.jsx)(b.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(o.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return n.a.createPortal(t,document.getElementById("drawer-hook"))};i(46);var F=e=>{const[t,i]=Object(c.useState)(!1),a=()=>{i(!1)};return Object(o.jsxs)(o.Fragment,{children:[t&&Object(o.jsx)(h,{onClick:a}),Object(o.jsx)(K,{show:t,onClick:a,children:Object(o.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(o.jsx)(U,{})})}),Object(o.jsxs)(H,{children:[Object(o.jsxs)("button",{className:"main-navigation__main-btn",onClick:()=>{i(!0)},children:[Object(o.jsx)("span",{}),Object(o.jsx)("span",{}),Object(o.jsx)("span",{})]}),Object(o.jsx)("h1",{className:"main-navigation__title",children:Object(o.jsx)(l.b,{to:"/",children:"Your Activity Management"})}),Object(o.jsx)("nav",{className:"main-navigation__header-nav",children:Object(o.jsx)(U,{})})]})]})};i(47),i(48);var W=e=>{const t=Object(c.useRef)(),{center:i,zoom:a}=e;return Object(c.useEffect)((()=>{const e=new window.google.maps.Map(t.current,{center:i,zoom:a});new window.google.maps.Marker({position:i,map:e})}),[i,a]),Object(o.jsx)("div",{ref:t,className:"map ".concat(e.className),style:e.style})};var B=e=>{const t=Object(c.useContext)(V),{isLoading:i,error:s,sendRequest:n,clearError:r}=E(),[l,d]=Object(c.useState)(!1),[u,O]=Object(c.useState)(!1),b=()=>d(!1),h=()=>{O(!1)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{error:s,onClear:r}),Object(o.jsx)(v,{show:l,onCancel:b,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:Object(o.jsx)(x,{onClick:b,children:"CLOSE"}),children:Object(o.jsx)("div",{className:"map-container",children:Object(o.jsx)(W,{center:e.coordinates,zoom:16})})}),Object(o.jsx)(v,{show:u,onCancel:h,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsx)(x,{inverse:!0,onClick:h,children:"CANCEL"}),Object(o.jsx)(x,{danger:!0,onClick:async()=>{O(!1);try{await n(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/activities/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token}),e.onDelete(e.id)}catch(i){}},children:"DELETE"})]}),children:Object(o.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),Object(o.jsx)("li",{className:"place-item",children:Object(o.jsxs)(j,{className:"place-item__content",children:[i&&Object(o.jsx)(_,{asOverlay:!0}),Object(o.jsx)("div",{className:"place-item__image",children:Object(o.jsx)("img",{src:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ASSET_URL+"/".concat(e.image),alt:e.title})}),Object(o.jsxs)("div",{className:"place-item__info",children:[Object(o.jsx)("h2",{children:e.title}),Object(o.jsx)("h3",{children:e.address}),Object(o.jsx)("p",{children:e.description})]}),Object(o.jsxs)("div",{className:"place-item__actions",children:[Object(o.jsx)(x,{inverse:!0,onClick:()=>d(!0),children:"VIEW ON MAP"}),t.userId===e.creatorId&&Object(o.jsx)(x,{to:"/activities/".concat(e.id),children:"EDIT"}),t.userId===e.creatorId&&Object(o.jsx)(x,{danger:!0,onClick:()=>{O(!0)},children:"DELETE"})]})]})})]})};i(49);var M=e=>0===e.items.length?Object(o.jsx)("div",{className:"place-list center",children:Object(o.jsxs)(j,{children:[Object(o.jsx)("h2",{children:"No activities found. Maybe create one?"}),Object(o.jsx)(x,{to:"/activities/new",children:"Add activity"})]})}):Object(o.jsx)("ul",{className:"place-list",children:e.items.map((t=>Object(o.jsx)(B,{id:t.id,image:t.image,title:t.title,description:t.description,address:t.address,creatorId:t.creator,coordinates:t.location,onDelete:e.onDeleteActivity},t.id)))});var G=()=>{const{isLoading:e,error:t,sendRequest:i,clearError:a}=E(),[s,n]=Object(c.useState)(),l=Object(r.useParams)().userId;Object(c.useEffect)((()=>{(async()=>{try{const e=await i(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/activities/user/".concat(l));n(e.activities)}catch(e){}})()}),[i,l]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{error:t,onClear:a}),e&&Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(_,{})}),!e&&s&&Object(o.jsx)(M,{items:s,onDeletedActivity:e=>{n((t=>t.filter((t=>t.id!==e))))}})]})};var z=()=>{const e=Object(c.useContext)(V),t=Object(r.useHistory)(),{isLoading:i,error:a,sendRequest:s,clearError:n}=E(),[l,d]=Object(c.useState)(),u=Object(r.useParams)().activityId,[O,b,h]=L({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);Object(c.useEffect)((()=>{(async()=>{try{const e=await s(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/activities/".concat(u));d(e.activity),h({title:{value:e.activity.title,isValid:!0},description:{value:e.activity.description,isValid:!0}},!0)}catch(e){}})()}),[s,u,h]);return l?i?Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(_,{})}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{error:a,onClear:n}),!i&&l&&Object(o.jsxs)("form",{className:"place-form",onSubmit:async i=>{i.preventDefault();try{await s(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/activities/".concat(u),"PATCH",JSON.stringify({title:O.inputs.title.value,description:O.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token}),t.push("/"+e.userId+"/activities")}catch(c){}},children:[Object(o.jsx)(P,{id:"title",element:"input",type:"text",label:"Title",validators:[y()],errorText:"Please enter a valid title.",onInput:b,initialValue:l.title,initialValid:!0}),Object(o.jsx)(P,{id:"description",element:"textarea",label:"Description",validators:[A(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:b,initialValue:l.description,initialValid:!0}),Object(o.jsx)(x,{type:"submit",disabled:!O.isValid,children:"UPDATE ACTIVITY"})]}),";"]}):Object(o.jsx)("div",{className:"center",children:Object(o.jsx)(j,{children:Object(o.jsx)("h2",{children:"Could not find activity!"})})})};i(50);var q=()=>{const e=Object(c.useContext)(V),[t,i]=Object(c.useState)(!0),{isLoading:a,error:s,sendRequest:n,clearError:r}=E(),[l,d,u]=L({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{error:s,onClear:r}),Object(o.jsxs)(j,{className:"authentication",children:[a&&Object(o.jsx)(_,{asOverlay:!0}),Object(o.jsx)("h2",{children:"Login Required"}),Object(o.jsx)("hr",{}),Object(o.jsxs)("form",{onSubmit:async i=>{if(i.preventDefault(),t)try{const t=await n(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/users/login","POST",JSON.stringify({email:l.inputs.email.value,password:l.inputs.password.value}),{"Content-Type":"application/json"});e.login(t.userId,t.token)}catch(c){}else try{const t=new FormData;t.append("email",l.inputs.email.value),t.append("name",l.inputs.name.value),t.append("password",l.inputs.password.value),t.append("image",l.inputs.image.value);const i=await n(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/users/signup","POST",t);e.login(i.userId,i.token)}catch(c){}},children:[!t&&Object(o.jsx)(P,{element:"input",id:"name",type:"text",label:"Your Name",validators:[y()],errorText:"Please enter a name.",onInput:d}),Object(o.jsx)(P,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:N}],errorText:"Please enter a valid email address.",onInput:d}),Object(o.jsx)(P,{element:"input",id:"password",type:"password",label:"Password",validators:[A(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:d}),!t&&Object(o.jsx)(D,{center:!0,id:"image",onInput:d,errorText:"Please provide an image."}),Object(o.jsx)(x,{type:"submit",disabled:!l.isValid,children:t?"LOGIN":"SIGNUP"})]}),Object(o.jsxs)(x,{inverse:!0,onClick:()=>{t?u({...l.inputs,name:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1):u({...l.inputs,name:void 0,image:void 0},l.inputs.email.isValid&&l.inputs.password.isValid),i((e=>!e))},children:["SWITCH TO ",t?"SIGNUP":"LOGIN"]})]})]})};let J;var Y=()=>{const{token:e,login:t,logout:i,userId:a}=(()=>{const[e,t]=Object(c.useState)(null),[i,a]=Object(c.useState)({}),[s,n]=Object(c.useState)(),r=(Object(c.useContext)(V),Object(c.useCallback)(((e,i,c)=>{t(i),a(e);const s=c||new Date((new Date).getTime()+36e5);n(s),localStorage.setItem("userData",JSON.stringify({userId:e,token:i,expiration:s.toISOString()}))}),[])),l=Object(c.useCallback)((()=>{t(null),a(null),localStorage.removeItem("userData"),n(null)}),[]);return Object(c.useEffect)((()=>{if(e&&s){const e=s.getTime()-(new Date).getTime();J=setTimeout(l,e)}else clearTimeout(J)}),[e,l,s]),Object(c.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&r(e.userId,e.token,new Date(e.expiration))}),[r]),{token:e,login:r,logout:l,userId:i}})();let s;return s=e?Object(o.jsxs)(r.Switch,{children:[Object(o.jsx)(r.Route,{path:"/",exact:!0,children:Object(o.jsx)(S,{})}),Object(o.jsx)(r.Route,{path:"/:userId/activities",exact:!0,children:Object(o.jsx)(G,{})}),Object(o.jsx)(r.Route,{path:"/activities/new",exact:!0,children:Object(o.jsx)(k,{})}),Object(o.jsx)(r.Route,{path:"/activities/:activityId",children:Object(o.jsx)(z,{})}),Object(o.jsx)(r.Redirect,{to:"/"})]}):Object(o.jsxs)(r.Switch,{children:[Object(o.jsx)(r.Route,{path:"/",exact:!0,children:Object(o.jsx)(S,{})}),Object(o.jsx)(r.Route,{path:"/:userId/activities",exact:!0,children:Object(o.jsx)(G,{})}),Object(o.jsx)(r.Route,{path:"/auth",children:Object(o.jsx)(q,{})}),Object(o.jsx)(r.Redirect,{to:"/auth"})]}),Object(o.jsx)(V.Provider,{value:{isLoggedIn:!!e,token:e,userId:a,login:t,logout:i},children:Object(o.jsxs)(l.a,{children:[Object(o.jsx)(F,{}),Object(o.jsx)("main",{children:s})]})})};var X=e=>{e&&e instanceof Function&&i.e(3).then(i.bind(null,53)).then((t=>{let{getCLS:i,getFID:c,getFCP:a,getLCP:s,getTTFB:n}=t;i(e),c(e),a(e),s(e),n(e)}))};n.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(Y,{})}),document.getElementById("root")),X()}],[[51,1,2]]]);
//# sourceMappingURL=main.6437ca26.chunk.js.map