{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import'./ActivityItem.css';import Card from'../../shared/components/UIElements/Card';import Button from'../../shared/components/FormElements/Button';import Modal from'../../shared/components/UIElements/Modal';import Map from'../../shared/components/UIElements/Map';import{AuthContext}from'../../shared/context/auth-context';import{useHttpClient}from'../../shared/hooks/http-hook';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ActivityItem=function ActivityItem(props){var auth=useContext(AuthContext);var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMap=_useState2[0],setShowMap=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmModal=_useState4[0],setShowConfirmModal=_useState4[1];var openMapHandler=function openMapHandler(){return setShowMap(true);};var closeMapHandler=function closeMapHandler(){return setShowMap(false);};var showDeleteWarningHandler=function showDeleteWarningHandler(){setShowConfirmModal(true);};var cancelDeleteHandler=function cancelDeleteHandler(){setShowConfirmModal(false);};var confirmDeleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setShowConfirmModal(false);_context.prev=1;_context.next=4;return sendRequest(process.env.REACT_APP_BACKEND_URL+\"/activities/\".concat(props.id),'DELETE',null,{Authorization:'Bearer '+auth.token});case 4:props.onDelete(props.id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);case 9:;case 10:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function confirmDeleteHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/_jsx(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsx(Button,{onClick:closeMapHandler,children:\"CLOSE\"}),children:/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(Map,{center:props.coordinates,zoom:16})})}),/*#__PURE__*/_jsx(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:cancelDeleteHandler,children:\"CANCEL\"}),/*#__PURE__*/_jsx(Button,{danger:true,onClick:confirmDeleteHandler,children:\"DELETE\"})]}),children:/*#__PURE__*/_jsx(\"p\",{children:\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"place-item\",children:/*#__PURE__*/_jsxs(Card,{className:\"place-item__content\",children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(\"div\",{className:\"place-item__image\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.REACT_APP_ASSET_URL+\"/\".concat(props.image),alt:props.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:props.title}),/*#__PURE__*/_jsx(\"h3\",{children:props.address}),/*#__PURE__*/_jsx(\"p\",{children:props.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__actions\",children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:openMapHandler,children:\"VIEW ON MAP\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{to:\"/activities/\".concat(props.id),children:\"EDIT\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{danger:true,onClick:showDeleteWarningHandler,children:\"DELETE\"})]})]})})]});};export default ActivityItem;","map":{"version":3,"names":["React","useState","useContext","Card","Button","Modal","Map","AuthContext","useHttpClient","ErrorModal","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ActivityItem","props","auth","_useHttpClient","isLoading","error","sendRequest","clearError","_useState","_useState2","_slicedToArray","showMap","setShowMap","_useState3","_useState4","showConfirmModal","setShowConfirmModal","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","process","env","REACT_APP_BACKEND_URL","concat","id","Authorization","token","onDelete","t0","stop","apply","arguments","children","onClear","show","onCancel","header","address","contentClass","footerClass","footer","onClick","className","center","coordinates","zoom","inverse","danger","asOverlay","src","REACT_APP_ASSET_URL","image","alt","title","description","userId","creatorId","to"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/activities/components/ActivityItem.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\n\r\nimport './ActivityItem.css'\r\nimport Card from '../../shared/components/UIElements/Card';\r\nimport Button from '../../shared/components/FormElements/Button';\r\nimport Modal from '../../shared/components/UIElements/Modal';\r\nimport Map from '../../shared/components/UIElements/Map';\r\nimport { AuthContext } from '../../shared/context/auth-context';\r\nimport { useHttpClient } from '../../shared/hooks/http-hook';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\n\r\n\r\nconst ActivityItem = props => {\r\n  const auth = useContext(AuthContext);\r\n  const { isLoading, error, sendRequest, clearError} = useHttpClient();\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\r\n\r\n  const openMapHandler = () => setShowMap(true);\r\n  const closeMapHandler = () => setShowMap(false);\r\n\r\n  const showDeleteWarningHandler = () => {\r\n        setShowConfirmModal(true);\r\n      };\r\n    \r\n  const cancelDeleteHandler = () => {\r\n        setShowConfirmModal(false);\r\n      };\r\n    \r\n    const confirmDeleteHandler = async () => {\r\n        setShowConfirmModal(false);\r\n        try {\r\n          await sendRequest(process.env.REACT_APP_BACKEND_URL +`/activities/${props.id}`,\r\n          'DELETE',\r\n          null,\r\n          {Authorization: 'Bearer ' + auth.token}\r\n          );\r\n          props.onDelete(props.id);\r\n\r\n        }catch(err) {};\r\n        \r\n    }\r\n    \r\n\r\n    return (\r\n        <>\r\n        <ErrorModal error={error} onClear={clearError} />\r\n        <Modal \r\n        show={showMap} \r\n        onCancel={closeMapHandler} \r\n        header={props.address} \r\n        contentClass='place-item__modal-content' \r\n        footerClass='place-item__modal-actions' \r\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>} >\r\n            <div className='map-container'>\r\n                <Map center={props.coordinates} zoom={16} />\r\n            </div>\r\n        </Modal>\r\n        <Modal\r\n        show={showConfirmModal}\r\n        onCancel={cancelDeleteHandler}\r\n        header=\"Are you sure?\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={\r\n          <React.Fragment>\r\n            <Button inverse onClick={cancelDeleteHandler}>\r\n              CANCEL\r\n            </Button>\r\n            <Button danger onClick={confirmDeleteHandler}>\r\n              DELETE\r\n            </Button>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <p>\r\n          Do you want to proceed and delete this place? Please note that it\r\n          can't be undone thereafter.\r\n        </p>\r\n      </Modal>\r\n        <li className=\"place-item\">\r\n            <Card className=\"place-item__content\">\r\n            {isLoading && <LoadingSpinner asOverlay />}\r\n                <div className=\"place-item__image\">\r\n                    <img \r\n                    src={process.env.REACT_APP_ASSET_URL +`/${props.image}`} \r\n                    alt={props.title} \r\n                    />\r\n                </div>\r\n                <div className=\"place-item__info\">\r\n                    <h2>{props.title}</h2>\r\n                    <h3>{props.address}</h3>\r\n                    <p>{props.description}</p>\r\n                </div>\r\n                <div className=\"place-item__actions\">\r\n                    <Button inverse onClick={openMapHandler}>VIEW ON MAP</Button>\r\n                    {auth.userId === props.creatorId &&<Button to={`/activities/${props.id}`}>EDIT</Button>}\r\n                    {auth.userId === props.creatorId &&<Button danger onClick={showDeleteWarningHandler}>DELETE</Button>}\r\n                </div>\r\n            </Card>\r\n        </li></>\r\n      );\r\n\r\n};\r\n\r\nexport default ActivityItem;"],"mappings":"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"},"metadata":{},"sourceType":"module"}