{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from'react';import{useParams,useHistory}from'react-router-dom';import Input from'../../shared/components/FormElements/Input';import Button from'../../shared/components/FormElements/Button';import Card from'../../shared/components/UIElements/Card';import{VALIDATOR_REQUIRE,VALIDATOR_MINLENGTH}from'../../shared/util/validators';import{useForm}from'../../shared/hooks/form-hook';import{useHttpClient}from'../../shared/hooks/http-hook';import'./Placeform.css';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import{AuthContext}from'../../shared/context/auth-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdateActivity=function UpdateActivity(){var auth=useContext(AuthContext);var history=useHistory();var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var _useState=useState(),_useState2=_slicedToArray(_useState,2),loadedActivities=_useState2[0],setLoadedActivities=_useState2[1];var activityId=useParams().activityId;var _useForm=useForm({title:{value:'',isValid:false},description:{value:'',isValid:false}},false),_useForm2=_slicedToArray(_useForm,3),formState=_useForm2[0],inputHandler=_useForm2[1],setFormData=_useForm2[2];useEffect(function(){var fetchActivity=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reponseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return sendRequest(process.env.REACT_APP_BACKEND_URL+\"/activities/\".concat(activityId));case 3:reponseData=_context.sent;setLoadedActivities(reponseData.activity);setFormData({title:{value:reponseData.activity.title,isValid:true},description:{value:reponseData.activity.description,isValid:true}},true);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:;case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchActivity(){return _ref.apply(this,arguments);};}();fetchActivity();},[sendRequest,activityId,setFormData]);var activityUpdateSubmitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return sendRequest(process.env.REACT_APP_BACKEND_URL+\"/activities/\".concat(activityId),'PATCH',JSON.stringify({title:formState.inputs.title.value,description:formState.inputs.description.value}),{'Content-Type':'application/json','Authorization':'Bearer '+auth.token});case 4:history.push('/'+auth.userId+'/activities');_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[1,7]]);}));return function activityUpdateSubmitHandler(_x){return _ref2.apply(this,arguments);};}();if(!loadedActivities){return/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Could not find event!\"})})});}if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),!isLoading&&loadedActivities&&/*#__PURE__*/_jsxs(\"form\",{className:\"place-form\",onSubmit:activityUpdateSubmitHandler,children:[/*#__PURE__*/_jsx(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler,initialValue:loadedActivities.title,initialValid:true}),/*#__PURE__*/_jsx(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (min. 5 characters).\",onInput:inputHandler,initialValue:loadedActivities.description,initialValid:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formState.isValid,children:\"UPDATE EVENT\"})]}),\";\"]});};export default UpdateActivity;","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","useHistory","Input","Button","Card","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","useHttpClient","LoadingSpinner","ErrorModal","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateActivity","auth","history","_useHttpClient","isLoading","error","sendRequest","clearError","_useState","_useState2","_slicedToArray","loadedActivities","setLoadedActivities","activityId","_useForm","title","value","isValid","description","_useForm2","formState","inputHandler","setFormData","fetchActivity","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","reponseData","wrap","_callee$","_context","prev","next","process","env","REACT_APP_BACKEND_URL","concat","sent","activity","t0","stop","apply","arguments","activityUpdateSubmitHandler","_ref2","_callee2","event","_callee2$","_context2","preventDefault","JSON","stringify","inputs","token","push","userId","_x","className","children","onClear","onSubmit","id","element","type","label","validators","errorText","onInput","initialValue","initialValid","disabled"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/activities/pages/UpdateActivity.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport Card from '../../shared/components/UIElements/Card';\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH\n} from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport './Placeform.css';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport { AuthContext } from '../../shared/context/auth-context';\n\n\nconst UpdateActivity = () => {\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n  const { isLoading, error, sendRequest, clearError} = useHttpClient();\n\n  const [loadedActivities, setLoadedActivities] = useState();\n\n  const activityId = useParams().activityId;\n\n  const [formState, inputHandler, setFormData] = useForm(\n    {\n      title: {\n        value: '',\n        isValid: false\n      },\n      description: {\n        value: '',\n        isValid: false\n      }\n    },\n    false\n  );\n\n  useEffect( () => {\n    const fetchActivity = async () => {\n      try {\n        const reponseData = await sendRequest(process.env.REACT_APP_BACKEND_URL +`/activities/${activityId}`,\n        );\n\n        setLoadedActivities(reponseData.activity);\n        setFormData(\n              {\n                title: {\n                  value: reponseData.activity.title,\n                  isValid: true\n                },\n                description: {\n                  value: reponseData.activity.description,\n                  isValid: true\n                }\n              },\n              true\n        );\n\n\n      }catch(err) {};\n      \n    }\n    \n    fetchActivity();\n\n  }, [sendRequest, activityId, setFormData]);\n\n\n  const activityUpdateSubmitHandler = async event => {\n    event.preventDefault();\n\n    try {\n      await sendRequest(\n        process.env.REACT_APP_BACKEND_URL +`/activities/${activityId}`,\n        'PATCH',\n        JSON.stringify({\n          title: formState.inputs.title.value,\n          description: formState.inputs.description.value\n        }),\n        {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + auth.token\n        }\n      );\n      history.push('/' + auth.userId + '/activities');\n    } catch (err) {}\n\n  };\n\n  if (!loadedActivities) {\n    return (\n      <div className=\"center\">\n        <Card>\n          <h2>Could not find event!</h2>\n        </Card>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"center\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n    <ErrorModal error={error} onClear={clearError} />\n      {!isLoading && loadedActivities && (\n      <form className=\"place-form\" onSubmit={activityUpdateSubmitHandler}>\n        <Input\n          id=\"title\"\n          element=\"input\"\n          type=\"text\"\n          label=\"Title\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid title.\"\n          onInput={inputHandler}\n          initialValue={loadedActivities.title}\n          initialValid={true}\n        />\n        <Input\n          id=\"description\"\n          element=\"textarea\"\n          label=\"Description\"\n          validators={[VALIDATOR_MINLENGTH(5)]}\n          errorText=\"Please enter a valid description (min. 5 characters).\"\n          onInput={inputHandler}\n          initialValue={loadedActivities.description}\n          initialValid={true}\n        />\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          UPDATE EVENT\n        </Button>\n      </form>\n      )};\n  </>\n  );\n\n};\n\nexport default UpdateActivity;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}