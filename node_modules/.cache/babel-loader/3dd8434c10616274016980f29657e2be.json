{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import ActivityList from'../components/ActivityList';import{useHttpClient}from'../../shared/hooks/http-hook';import{AuthContext}from'../../shared/context/auth-context';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserActivity=function UserActivity(){var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var _useState=useState(),_useState2=_slicedToArray(_useState,2),loadedActivities=_useState2[0],setLoadedActivities=_useState2[1];var userId=useParams().userId;useEffect(function(){var fetchActivities=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reponseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return sendRequest(process.env.REACT_APP_BACKEND_URL+\"/activities/user/\".concat(userId));case 3:reponseData=_context.sent;setLoadedActivities(reponseData.activities);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:;case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchActivities(){return _ref.apply(this,arguments);};}();fetchActivities();},[sendRequest,userId]);var activityDeleteHandler=function activityDeleteHandler(deletedActivityId){setLoadedActivities(function(prevActivities){return prevActivities.filter(function(activity){return activity.id!==deletedActivityId;});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),!isLoading&&loadedActivities&&/*#__PURE__*/_jsx(ActivityList,{items:loadedActivities,onDeletedActivity:activityDeleteHandler})]});};export default UserActivity;","map":{"version":3,"names":["React","useEffect","useState","useParams","ActivityList","useHttpClient","AuthContext","ErrorModal","LoadingSpinner","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UserActivity","_useHttpClient","isLoading","error","sendRequest","clearError","_useState","_useState2","_slicedToArray","loadedActivities","setLoadedActivities","userId","fetchActivities","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","reponseData","wrap","_callee$","_context","prev","next","process","env","REACT_APP_BACKEND_URL","concat","sent","activities","t0","stop","apply","arguments","activityDeleteHandler","deletedActivityId","prevActivities","filter","activity","id","children","onClear","className","items","onDeletedActivity"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/activities/pages/UserActivity.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport ActivityList from '../components/ActivityList';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { AuthContext } from '../../shared/context/auth-context'; \nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\n\n\nconst UserActivity = () => {\n  const { isLoading, error, sendRequest, clearError} = useHttpClient();\n  const [loadedActivities, setLoadedActivities] = useState();\n\n  const userId = useParams().userId;\n\n  useEffect( () => {\n    const fetchActivities = async () => {\n      try {\n        const reponseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + `\\/activities/user/${userId}`);\n\n        setLoadedActivities(reponseData.activities);\n\n      }catch(err) {};\n\n    }\n    \n    fetchActivities();\n\n  }, [sendRequest, userId]);\n\n  const activityDeleteHandler = deletedActivityId => {\n    setLoadedActivities(prevActivities => \n      prevActivities.filter(activity => activity.id !== deletedActivityId));\n  };\n\n  return( \n    <><ErrorModal error={error} onClear={clearError} />\n    {isLoading && (\n        <div className=\"center\">\n          <LoadingSpinner />\n        </div>\n      )}\n    {!isLoading && loadedActivities && <ActivityList items={loadedActivities} onDeletedActivity={activityDeleteHandler} />}\n    </>\n  );\n};\n\nexport default UserActivity;\n"],"mappings":"yfAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAE5C,MAAO,CAAAC,YAAY,KAAM,4BAA4B,CACrD,OAASC,aAAa,KAAQ,8BAA8B,CAC5D,OAASC,WAAW,KAAQ,mCAAmC,CAC/D,MAAO,CAAAC,UAAU,KAAM,+CAA+C,CACtE,MAAO,CAAAC,cAAc,KAAM,mDAAmD,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG/E,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB,IAAAC,cAAA,CAAqDX,aAAa,CAAC,CAAC,CAA5DY,SAAS,CAAAD,cAAA,CAATC,SAAS,CAAEC,KAAK,CAAAF,cAAA,CAALE,KAAK,CAAEC,WAAW,CAAAH,cAAA,CAAXG,WAAW,CAAEC,UAAU,CAAAJ,cAAA,CAAVI,UAAU,CACjD,IAAAC,SAAA,CAAgDnB,QAAQ,CAAC,CAAC,CAAAoB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnDG,gBAAgB,CAAAF,UAAA,IAAEG,mBAAmB,CAAAH,UAAA,IAE5C,GAAM,CAAAI,MAAM,CAAGvB,SAAS,CAAC,CAAC,CAACuB,MAAM,CAEjCzB,SAAS,CAAE,UAAM,CACf,GAAM,CAAA0B,eAAe,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,WAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEM,CAAAnB,WAAW,CAACoB,OAAO,CAACC,GAAG,CAACC,qBAAqB,qBAAAC,MAAA,CAAwBhB,MAAM,CAAE,CAAC,QAAlGO,WAAW,CAAAG,QAAA,CAAAO,IAAA,CAEjBlB,mBAAmB,CAACQ,WAAW,CAACW,UAAU,CAAC,CAACR,QAAA,CAAAE,IAAA,gBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAS,EAAA,CAAAT,QAAA,oBAEhC,CAAC,yBAAAA,QAAA,CAAAU,IAAA,MAAAd,OAAA,gBAEhB,kBARK,CAAAL,eAAeA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAQpB,CAEDrB,eAAe,CAAC,CAAC,CAEnB,CAAC,CAAE,CAACR,WAAW,CAAEO,MAAM,CAAC,CAAC,CAEzB,GAAM,CAAAuB,qBAAqB,CAAG,QAAxB,CAAAA,qBAAqBA,CAAGC,iBAAiB,CAAI,CACjDzB,mBAAmB,CAAC,SAAA0B,cAAc,QAChC,CAAAA,cAAc,CAACC,MAAM,CAAC,SAAAC,QAAQ,QAAI,CAAAA,QAAQ,CAACC,EAAE,GAAKJ,iBAAiB,GAAC,GAAC,CACzE,CAAC,CAED,mBACEpC,KAAA,CAAAF,SAAA,EAAA2C,QAAA,eAAE7C,IAAA,CAACH,UAAU,EAACW,KAAK,CAAEA,KAAM,CAACsC,OAAO,CAAEpC,UAAW,CAAE,CAAC,CAClDH,SAAS,eACNP,IAAA,QAAK+C,SAAS,CAAC,QAAQ,CAAAF,QAAA,cACrB7C,IAAA,CAACF,cAAc,GAAE,CAAC,CACf,CACN,CACF,CAACS,SAAS,EAAIO,gBAAgB,eAAId,IAAA,CAACN,YAAY,EAACsD,KAAK,CAAElC,gBAAiB,CAACmC,iBAAiB,CAAEV,qBAAsB,CAAE,CAAC,EACpH,CAAC,CAEP,CAAC,CAED,cAAe,CAAAlC,YAAY"},"metadata":{},"sourceType":"module"}