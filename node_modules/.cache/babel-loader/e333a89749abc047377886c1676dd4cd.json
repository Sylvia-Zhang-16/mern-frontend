{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useReducer,useContext}from'react';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import'./Placeform.css';import Input from'../../shared/components/FormElements/Input';import{VALIDATOR_MINLENGTH,VALIDATOR_REQUIRE}from'../../shared/util/validators';import Button from'../../shared/components/FormElements/Button';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import ImageUpload from'../../shared/components/FormElements/ImageUpload';import{useForm}from'../../shared/hooks/form-hook';import{useHttpClient}from'../../shared/hooks/http-hook';import{AuthContext}from'../../shared/context/auth-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NewActivity=function NewActivity(){var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var auth=useContext(AuthContext);var _useForm=useForm({title:{value:'',isValid:false},description:{value:'',isValid:false},address:{value:'',isValid:false},image:{value:null,isValid:false}},false),_useForm2=_slicedToArray(_useForm,2),formState=_useForm2[0],inputHandler=_useForm2[1];var history=useHistory();var activitySubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;formData=new FormData();formData.append('title',formState.inputs.title.value);formData.append('description',formState.inputs.description.value);formData.append('address',formState.inputs.address.value);formData.append('image',formState.inputs.image.value);_context.next=9;return sendRequest(process.env.REACT_APP_BACKEND_URL+'/activities','POST',formData,{Authorization:'Bearer '+auth.token});case 9:history.push('/');_context.next=14;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);case 14:;case 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function activitySubmitHandler(_x){return _ref.apply(this,arguments);};}();var print=function print(){console.log(auth.userId);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/_jsxs(\"form\",{className:\"place-form\",onSubmit:activitySubmitHandler,children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (at least 5 characters).\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"address\",element:\"input\",label:\"Address\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid address.\",onInput:inputHandler}),/*#__PURE__*/_jsx(ImageUpload,{center:true,id:\"image\",onInput:inputHandler,errorText:\"Please provide an image.\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",onClick:print,disabled:!formState.isValid,children:\"ADD ACTIVITY\"})]})]});};export default NewActivity;","map":{"version":3,"names":["React","useCallback","useReducer","useContext","useHistory","Input","VALIDATOR_MINLENGTH","VALIDATOR_REQUIRE","Button","ErrorModal","LoadingSpinner","ImageUpload","useForm","useHttpClient","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NewActivity","_useHttpClient","isLoading","error","sendRequest","clearError","auth","_useForm","title","value","isValid","description","address","image","_useForm2","_slicedToArray","formState","inputHandler","history","activitySubmitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","formData","wrap","_callee$","_context","prev","next","preventDefault","FormData","append","inputs","process","env","REACT_APP_BACKEND_URL","Authorization","token","push","t0","stop","_x","apply","arguments","print","console","log","userId","children","onClear","className","onSubmit","asOverlay","id","element","type","label","validators","errorText","onInput","center","onClick","disabled"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/activities/pages/NewActivity.js"],"sourcesContent":["import React, { useCallback, useReducer, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\n\r\nimport './Placeform.css'\r\nimport Input from '../../shared/components/FormElements/Input';\r\nimport { VALIDATOR_MINLENGTH, VALIDATOR_REQUIRE } from '../../shared/util/validators';\r\nimport Button from '../../shared/components/FormElements/Button';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\nimport ImageUpload from '../../shared/components/FormElements/ImageUpload';\r\n\r\nimport { useForm } from '../../shared/hooks/form-hook';\r\nimport { useHttpClient } from '../../shared/hooks/http-hook';\r\nimport { AuthContext } from '../../shared/context/auth-context'; \r\n\r\n\r\n\r\nconst NewActivity = () => {\r\n  const { isLoading, error, sendRequest, clearError} = useHttpClient();\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  const [formState, inputHandler] = useForm(\r\n      {\r\n        title: {\r\n          value: '',\r\n          isValid: false\r\n        },\r\n        description: {\r\n          value: '',\r\n          isValid: false\r\n        },\r\n        address: {\r\n          value: '',\r\n          isValid: false\r\n        },\r\n        image: {\r\n          value: null,\r\n          isValid: false\r\n        }\r\n      },\r\n      false\r\n    );\r\n   const history = useHistory();\r\n\r\n    const activitySubmitHandler = async event => {\r\n      event.preventDefault();\r\n\r\n      try {\r\n          const formData = new FormData();\r\n            formData.append('title', formState.inputs.title.value);\r\n            formData.append('description', formState.inputs.description.value);\r\n            formData.append('address', formState.inputs.address.value);\r\n            formData.append('image', formState.inputs.image.value);\r\n          await sendRequest(process.env.REACT_APP_BACKEND_URL + '/activities', \r\n          'POST', \r\n          formData,\r\n          {Authorization: 'Bearer ' + auth.token}\r\n          );\r\n      history.push('/');\r\n\r\n      }catch(err){};\r\n    };\r\n\r\n    const print = () => {\r\n      console.log(auth.userId)\r\n    }\r\n  \r\n    return (\r\n      <><ErrorModal error={error} onClear={clearError} />\r\n      <form className=\"place-form\" onSubmit={activitySubmitHandler}>\r\n      {isLoading && <LoadingSpinner asOverlay />}\r\n        <Input\r\n          id=\"title\"\r\n          element=\"input\"\r\n          type=\"text\"\r\n          label=\"Title\"\r\n          validators={[VALIDATOR_REQUIRE()]}\r\n          errorText=\"Please enter a valid title.\"\r\n          onInput={inputHandler} />\r\n        <Input\r\n          id=\"description\"\r\n          element=\"textarea\"\r\n          label=\"Description\"\r\n          validators={[VALIDATOR_MINLENGTH(5)]}\r\n          errorText=\"Please enter a valid description (at least 5 characters).\"\r\n          onInput={inputHandler} />\r\n        <Input\r\n          id=\"address\"\r\n          element=\"input\"\r\n          label=\"Address\"\r\n          validators={[VALIDATOR_REQUIRE()]}\r\n          errorText=\"Please enter a valid address.\"\r\n          onInput={inputHandler} />\r\n         <ImageUpload center id=\"image\" onInput={inputHandler} errorText='Please provide an image.'/>\r\n        <Button type=\"submit\" onClick = {print} disabled={!formState.isValid}>\r\n          ADD ACTIVITY\r\n        </Button>\r\n      </form></>\r\n    );\r\n  };\r\n\r\nexport default NewActivity;"],"mappings":"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"},"metadata":{},"sourceType":"module"}