{"ast":null,"code":"import _slicedToArray from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from'react';import'./ImageUpload.css';import Button from'./Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUpload=function ImageUpload(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),previewUrl=_useState4[0],setPreviewUrl=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];var filePickerRef=useRef();useEffect(function(){if(!file){return;}var fileReader=new FileReader();fileReader.onload=function(){setPreviewUrl(fileReader.result);};fileReader.readAsDataURL(file);},[file]);var pickedHandler=function pickedHandler(event){var pickedFile;var fileIsValid=isValid;if(event.target.files&&event.target.files.length===1){pickedFile=event.target.files[0];setFile(pickedFile);setIsValid(true);fileIsValid=true;}else{setIsValid(false);fileIsValid=false;}props.onInput(props.id,pickedFile,fileIsValid);};var pickImageHandler=function pickImageHandler(){filePickerRef.current.click();};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"input\",{id:props.id,ref:filePickerRef,style:{display:'none'},type:\"file\",accept:\".jpg,.png,.jpeg\",onChange:pickedHandler}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload \".concat(props.center&&'center'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload__preview\",children:[previewUrl&&/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Preview\"}),!previewUrl&&/*#__PURE__*/_jsx(\"p\",{children:\"Please pick an image.\"})]}),/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:pickImageHandler,children:\"PICK IMAGE\"})]}),!isValid&&/*#__PURE__*/_jsx(\"p\",{children:props.errorText})]});};export default ImageUpload;","map":{"version":3,"names":["React","useRef","useState","useEffect","Button","jsx","_jsx","jsxs","_jsxs","ImageUpload","props","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","previewUrl","setPreviewUrl","_useState5","_useState6","isValid","setIsValid","filePickerRef","fileReader","FileReader","onload","result","readAsDataURL","pickedHandler","event","pickedFile","fileIsValid","target","files","length","onInput","id","pickImageHandler","current","click","className","children","ref","style","display","type","accept","onChange","concat","center","src","alt","onClick","errorText"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/shared/components/FormElements/ImageUpload.js"],"sourcesContent":["import React, { useRef, useState, useEffect }  from 'react';\r\n\r\nimport './ImageUpload.css';\r\nimport Button from './Button';\r\n\r\nconst ImageUpload = props => {\r\n\r\n    const [file, setFile] = useState();\r\n    const [previewUrl, setPreviewUrl] = useState();\r\n    const [isValid, setIsValid] = useState(false);\r\n\r\n    const filePickerRef = useRef();\r\n\r\n    useEffect(() => {\r\n        if (!file) {\r\n          return;\r\n        }\r\n        const fileReader = new FileReader();\r\n        fileReader.onload = () => {\r\n          setPreviewUrl(fileReader.result);\r\n        };\r\n        fileReader.readAsDataURL(file);\r\n      }, [file]);\r\n\r\n    const pickedHandler = event => {\r\n        let pickedFile;\r\n        let fileIsValid = isValid;\r\n\r\n        if (event.target.files && event.target.files.length === 1) {\r\n            pickedFile = event.target.files[0];\r\n            setFile(pickedFile);\r\n            setIsValid(true);\r\n            fileIsValid = true;\r\n        } else {\r\n            setIsValid(false);\r\n            fileIsValid = false;\r\n        }\r\n        props.onInput(props.id, pickedFile, fileIsValid);\r\n  };\r\n\r\n    const pickImageHandler = () => {\r\n    filePickerRef.current.click();\r\n  };\r\n\r\n\r\n    return (\r\n        <div className=\"form-control\">\r\n      <input\r\n        id={props.id}\r\n        ref={filePickerRef}\r\n        style={{ display: 'none' }}\r\n        type=\"file\"\r\n        accept=\".jpg,.png,.jpeg\"\r\n        onChange={pickedHandler}\r\n      />\r\n      <div className={`image-upload ${props.center && 'center'}`}>\r\n        <div className=\"image-upload__preview\">\r\n          {previewUrl && <img src={previewUrl} alt=\"Preview\" />}\r\n          {!previewUrl && <p>Please pick an image.</p>}\r\n        </div>\r\n        <Button type=\"button\" onClick={pickImageHandler}>PICK IMAGE</Button>\r\n      </div>\r\n      {!isValid && <p>{props.errorText}</p>}\r\n    </div>\r\n    )\r\n\r\n\r\n};\r\n\r\nexport default ImageUpload"],"mappings":"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"},"metadata":{},"sourceType":"module"}