{"ast":null,"code":"var _jsxFileName = \"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/activities/pages/UpdateActivity.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport Card from '../../shared/components/UIElements/Card';\nimport { VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH } from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport './Placeform.css';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UpdateActivity = () => {\n  _s();\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const [loadedActivities, setLoadedActivities] = useState();\n  const activityId = useParams().activityId;\n  const [formState, inputHandler, setFormData] = useForm({\n    title: {\n      value: '',\n      isValid: false\n    },\n    description: {\n      value: '',\n      isValid: false\n    }\n  }, false);\n  useEffect(() => {\n    const fetchActivity = async () => {\n      try {\n        const reponseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + `/activities/${activityId}`);\n        setLoadedActivities(reponseData.activity);\n        setFormData({\n          title: {\n            value: reponseData.activity.title,\n            isValid: true\n          },\n          description: {\n            value: reponseData.activity.description,\n            isValid: true\n          }\n        }, true);\n      } catch (err) {}\n      ;\n    };\n    fetchActivity();\n  }, [sendRequest, activityId, setFormData]);\n  const activityUpdateSubmitHandler = async event => {\n    event.preventDefault();\n    try {\n      await sendRequest(process.env.REACT_APP_BACKEND_URL + `/activities/${activityId}`, 'PATCH', JSON.stringify({\n        title: formState.inputs.title.value,\n        description: formState.inputs.description.value\n      }), {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + auth.token\n      });\n      history.push('/' + auth.userId + '/activities');\n    } catch (err) {}\n  };\n  if (!loadedActivities) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Could not find event!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      error: error,\n      onClear: clearError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this), !isLoading && loadedActivities && /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"place-form\",\n      onSubmit: activityUpdateSubmitHandler,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        id: \"title\",\n        element: \"input\",\n        type: \"text\",\n        label: \"Title\",\n        validators: [VALIDATOR_REQUIRE()],\n        errorText: \"Please enter a valid title.\",\n        onInput: inputHandler,\n        initialValue: loadedActivities.title,\n        initialValid: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        id: \"description\",\n        element: \"textarea\",\n        label: \"Description\",\n        validators: [VALIDATOR_MINLENGTH(5)],\n        errorText: \"Please enter a valid description (min. 5 characters).\",\n        onInput: inputHandler,\n        initialValue: loadedActivities.description,\n        initialValid: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        disabled: !formState.isValid,\n        children: \"UPDATE EVENT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), \";\"]\n  }, void 0, true);\n};\n_s(UpdateActivity, \"yBfSk13EFCC1WeAWkf7Vn2JSf7A=\", false, function () {\n  return [useHistory, useHttpClient, useParams, useForm];\n});\n_c = UpdateActivity;\nexport default UpdateActivity;\nvar _c;\n$RefreshReg$(_c, \"UpdateActivity\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","useHistory","Input","Button","Card","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","useHttpClient","LoadingSpinner","ErrorModal","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","UpdateActivity","_s","auth","history","isLoading","error","sendRequest","clearError","loadedActivities","setLoadedActivities","activityId","formState","inputHandler","setFormData","title","value","isValid","description","fetchActivity","reponseData","process","env","REACT_APP_BACKEND_URL","activity","err","activityUpdateSubmitHandler","event","preventDefault","JSON","stringify","inputs","token","push","userId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClear","onSubmit","id","element","type","label","validators","errorText","onInput","initialValue","initialValid","disabled","_c","$RefreshReg$"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/activities/pages/UpdateActivity.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport Card from '../../shared/components/UIElements/Card';\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH\n} from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport './Placeform.css';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport { AuthContext } from '../../shared/context/auth-context';\n\n\nconst UpdateActivity = () => {\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n  const { isLoading, error, sendRequest, clearError} = useHttpClient();\n\n  const [loadedActivities, setLoadedActivities] = useState();\n\n  const activityId = useParams().activityId;\n\n  const [formState, inputHandler, setFormData] = useForm(\n    {\n      title: {\n        value: '',\n        isValid: false\n      },\n      description: {\n        value: '',\n        isValid: false\n      }\n    },\n    false\n  );\n\n  useEffect( () => {\n    const fetchActivity = async () => {\n      try {\n        const reponseData = await sendRequest(process.env.REACT_APP_BACKEND_URL +`/activities/${activityId}`,\n        );\n\n        setLoadedActivities(reponseData.activity);\n        setFormData(\n              {\n                title: {\n                  value: reponseData.activity.title,\n                  isValid: true\n                },\n                description: {\n                  value: reponseData.activity.description,\n                  isValid: true\n                }\n              },\n              true\n        );\n\n\n      }catch(err) {};\n      \n    }\n    \n    fetchActivity();\n\n  }, [sendRequest, activityId, setFormData]);\n\n\n  const activityUpdateSubmitHandler = async event => {\n    event.preventDefault();\n\n    try {\n      await sendRequest(\n        process.env.REACT_APP_BACKEND_URL +`/activities/${activityId}`,\n        'PATCH',\n        JSON.stringify({\n          title: formState.inputs.title.value,\n          description: formState.inputs.description.value\n        }),\n        {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + auth.token\n        }\n      );\n      history.push('/' + auth.userId + '/activities');\n    } catch (err) {}\n\n  };\n\n  if (!loadedActivities) {\n    return (\n      <div className=\"center\">\n        <Card>\n          <h2>Could not find event!</h2>\n        </Card>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"center\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n    <ErrorModal error={error} onClear={clearError} />\n      {!isLoading && loadedActivities && (\n      <form className=\"place-form\" onSubmit={activityUpdateSubmitHandler}>\n        <Input\n          id=\"title\"\n          element=\"input\"\n          type=\"text\"\n          label=\"Title\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid title.\"\n          onInput={inputHandler}\n          initialValue={loadedActivities.title}\n          initialValid={true}\n        />\n        <Input\n          id=\"description\"\n          element=\"textarea\"\n          label=\"Description\"\n          validators={[VALIDATOR_MINLENGTH(5)]}\n          errorText=\"Please enter a valid description (min. 5 characters).\"\n          onInput={inputHandler}\n          initialValue={loadedActivities.description}\n          initialValid={true}\n        />\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          UPDATE EVENT\n        </Button>\n      </form>\n      )};\n  </>\n  );\n\n};\n\nexport default UpdateActivity;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}