{"ast":null,"code":"import _slicedToArray from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer,useEffect}from'react';import{validate}from'../../util/validators';import'./Input.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var inputReducer=function inputReducer(state,action){switch(action.type){case'CHANGE':return _objectSpread(_objectSpread({},state),{},{value:action.val,isValid:validate(action.val,action.validators)});case'TOUCH':{return _objectSpread(_objectSpread({},state),{},{isTouched:true});}default:return state;};};var Input=function Input(props){var _useReducer=useReducer(inputReducer,{value:props.initialValue||'',isValid:props.initialValid||false,isTouched:false}),_useReducer2=_slicedToArray(_useReducer,2),inputState=_useReducer2[0],dispatch=_useReducer2[1];// currentstate, dispatch方法=（reducer方法，state初始值）\nvar id=props.id,onInput=props.onInput;var value=inputState.value,isValid=inputState.isValid;useEffect(function(){onInput(id,value,isValid);},[id,value,isValid,onInput]);var changeHandler=function changeHandler(event){dispatch({type:'CHANGE',val:event.target.value,validators:props.validators});};var touchHandler=function touchHandler(){dispatch({type:'TOUCH'});};var element=props.element==='input'?/*#__PURE__*/_jsx(\"input\",{id:props.id,type:props.type,placeholder:props.placeholder,onChange:changeHandler,onBlur:touchHandler,value:inputState.value}):/*#__PURE__*/_jsx(\"textarea\",{id:props.id,rows:props.rows||3,onChange:changeHandler,onBlur:touchHandler,value:inputState.value});return/*#__PURE__*/_jsxs(\"div\",{className:\"form-control \".concat(!inputState.isValid&&inputState.isTouched&&'form-control--invalid'),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:props.id,children:props.label}),element,!inputState.isValid&&inputState.isTouched&&/*#__PURE__*/_jsx(\"p\",{children:props.errorText})]});};export default Input;","map":{"version":3,"names":["React","useReducer","useEffect","validate","jsx","_jsx","jsxs","_jsxs","inputReducer","state","action","type","_objectSpread","value","val","isValid","validators","isTouched","Input","props","_useReducer","initialValue","initialValid","_useReducer2","_slicedToArray","inputState","dispatch","id","onInput","changeHandler","event","target","touchHandler","element","placeholder","onChange","onBlur","rows","className","concat","children","htmlFor","label","errorText"],"sources":["/Users/sylviazhang/Documents/software-development/projects/MERN/mern-frontend/src/shared/components/FormElements/Input.js"],"sourcesContent":["import React, { useReducer, useEffect } from 'react';\r\n\r\nimport { validate } from '../../util/validators';\r\nimport './Input.css';\r\n\r\nconst inputReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case 'CHANGE':\r\n            return {\r\n                ...state,\r\n                value:action.val,\r\n                isValid: validate(action.val, action.validators)\r\n            };\r\n        case 'TOUCH':{\r\n            return {\r\n                ...state,\r\n                isTouched: true\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    };\r\n};\r\n\r\n\r\nconst Input = props => {\r\n    const [inputState, dispatch] = useReducer(inputReducer, {\r\n        value:props.initialValue || '', \r\n        isValid:props.initialValid || false, \r\n        isTouched:false});\r\n    // currentstate, dispatch方法=（reducer方法，state初始值）\r\n\r\n    const {id, onInput } = props;\r\n    const {value, isValid } = inputState;\r\n\r\n    useEffect(() => {\r\n        onInput(id, value, isValid)\r\n    },[id, value, isValid, onInput]);\r\n\r\n    const changeHandler = event => {\r\n        dispatch({type:'CHANGE', val:event.target.value, validators:props.validators});\r\n\r\n    };\r\n\r\n    const touchHandler = () => {\r\n        dispatch({type:'TOUCH'});\r\n\r\n    };\r\n\r\n\r\n    const element = props.element === 'input' ? (\r\n        <input \r\n        id={props.id} \r\n        type={props.type} \r\n        placeholder={props.placeholder} \r\n        onChange={changeHandler} \r\n        onBlur={touchHandler} \r\n        value={inputState.value}/>\r\n      ) : (\r\n        <textarea \r\n        id={props.id} \r\n        rows={props.rows || 3} \r\n        onChange={changeHandler} \r\n        onBlur={touchHandler} \r\n        value={inputState.value}/>\r\n      );\r\n    \r\n    return (\r\n        <div className={`form-control ${!inputState.isValid && inputState.isTouched && 'form-control--invalid'}`}>\r\n          <label htmlFor={props.id}>{props.label}</label>\r\n          {element}\r\n          {!inputState.isValid && inputState.isTouched && <p>{props.errorText}</p>}\r\n        </div>\r\n      );\r\n  \r\n};\r\n\r\nexport default Input;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}